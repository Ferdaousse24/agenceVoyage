<div class="search-filter">
  <form (ngSubmit)="onSubmit()">
    <div class="form-row">
      <div class="form-group">
        <label for="departure">Depuis</label>
        <select id="departure" class="form-control" [(ngModel)]="departure" name="departure">
          <option *ngFor="let city of cities" [value]="city.code">{{ city.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="destination">Vers</label>
        <select id="destination" class="form-control" [(ngModel)]="destination" name="destination" (change)="onDestinationChange()">
          <option *ngFor="let city of cities" [value]="city.code">{{ city.name }}</option>
        </select>
      </div>

      <div class="form-group trip-type">
        <label>
          <input type="radio" [(ngModel)]="tripType" name="tripType" value="one-way" (change)="onTripTypeChange()" checked>
          Aller simple
        </label>
        <label>
          <input type="radio" [(ngModel)]="tripType" name="tripType" value="round-trip" (change)="onTripTypeChange()">
          Aller-Retour
        </label>
      </div>
    </div>

    <div *ngIf="showAdditionalFields">
      <div class="form-row">
        <div class="form-group">
          <label for="departureDate">Date de départ *</label>
          <input type="date" id="departureDate" class="form-control" [(ngModel)]="departureDate" name="departureDate">
        </div>

        <div class="form-group">
          <label for="returnDate">Date d'arrivée *</label>
          <input type="date" id="returnDate" class="form-control" [(ngModel)]="returnDate" name="returnDate" [disabled]="tripType === 'one-way'">
        </div>

        <div class="form-group">
          <label for="adults">Nombre d'adultes *</label>
          <input type="number" id="adults" class="form-control" [(ngModel)]="adults" name="adults" min="1">
        </div>

        <div class="form-group">
          <label for="children">Nombre d'enfants</label>
          <input type="number" id="children" class="form-control" [(ngModel)]="children" name="children" min="0">
        </div>
      </div>
    </div>

    <div class="form-row">
      <button *ngIf="showAdditionalFields" type="button" class="btn btn-secondary reduce-btn" (click)="toggleFields()">
        <i class="fas fa-chevron-up"></i> Réduire
      </button>
      <button type="submit" class="btn btn-primary">Réserver maintenant</button>
    </div>
  </form>
</div>
